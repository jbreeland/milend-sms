<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Milend SMS Test</title>
</head>
<body>
  <h1>Send SMS 3</h1>
  <form id="smsForm">
    <label for="to">To:</label>
    <input type="text" id="to" name="to" value="9435550123"><br><br>

    <label for="message">Message:</label>
    <input type="text" id="message" name="message" value="Test message"><br><br>

    <button type="submit">Send</button>
  </form>

  <pre id="response"></pre>

  <script>
    document.getElementById("smsForm").addEventListener("submit", async function (e) {
      e.preventDefault();

      let toInput = document.getElementById("to").value;
      let cleanedTo = toInput.replace(/\D/g, ""); // strip non-digits

      if (cleanedTo.length !== 10) {
        alert("Please enter a valid 10-digit U.S. phone number.");
        return;
      }

      let to = "+1" + cleanedTo;
      const message = document.getElementById("message").value;

      try {
        const response = await fetch("https://prod-00.northcentralus.logic.azure.com:443/workflows/e2777754d0e84d079fc7c0de99b6e218/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=Uh0cyjoLG1HznoghZQ-n9CAA5RQZkgg4baFMzITzcUI", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ to, message })
        });

        const result = await response.json();
        document.getElementById("response").textContent = JSON.stringify(result, null, 2);
      } catch (error) {
        document.getElementById("response").textContent = "Error: " + error.message;
      }
    });
  </script>
</body>
</html>
