
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Milend SMS Test</title>
</head>
<body>
  <h1>Send SMS</h1>
  <form id="smsForm">
    <label for="to">To:</label>
    <input type="text" id="to" name="to" value="+19435550123"><br><br>
    <label for="message">Message:</label>
    <input type="text" id="message" name="message" value="Test message"><br><br>
    <button type="submit">Send</button>
  </form>

  <pre id="response"></pre>

  <script>
  document.getElementById("smsForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    let toInput = document.getElementById("to").value;
    let cleanedTo = toInput.replace(/\D/g, ""); // Remove all non-digits

    if (cleanedTo.length !== 10) {
      alert("Please enter a valid 10-digit U.S. phone number.");
      return;
    }

    let to = "+1" + cleanedTo;
    const message = document.getElementById("message").value;

    const response = await fetch("{{YOUR_LOGIC_APP_URL}}", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ to, message })
    });

    const result = await response.json();
    document.getElementById("response").textContent = JSON.stringify(result, null, 2);
  });
</script>
</body>
</html>
